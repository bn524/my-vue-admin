# YOLOv8 åå°ç®¡ç†ç³»ç»Ÿå¼€å‘æ—¥å¿— - é˜¶æ®µäºŒ

## ğŸ“… å¼€å‘æ—¶é—´çº¿
**å¼€å‘å‘¨æœŸ**: 2025å¹´09æœˆ30æ—¥ - 2025å¹´10æœˆ1æ—¥  
**ä¸»è¦ç›®æ ‡**: å®ç°å‰åç«¯å®Œæ•´é›†æˆï¼Œè§£å†³é¡µé¢æ¸²æŸ“é—®é¢˜ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡çº§ç•Œé¢è®¾è®¡ä¸ç»„ä»¶åŒ–æ¶æ„

## ğŸ¯ æœ¬é˜¶æ®µæ ¸å¿ƒä»»åŠ¡

### 1. å‰åç«¯å®Œæ•´é›†æˆ
- âœ… å®ç°å›¾ç‰‡ä¸Šä¼ ä¸æ£€æµ‹åŠŸèƒ½
- âœ… å»ºç«‹æ£€æµ‹ç»“æœæ•°æ®åº“å­˜å‚¨
- âœ… å®ç°æ£€æµ‹å†å²åŒæ­¥æŸ¥çœ‹
- âœ… ä¼˜åŒ–APIæœåŠ¡æ¶æ„

### 2. ç”¨æˆ·ç•Œé¢ä¼˜åŒ–ï¼ˆæ–°å¢è§†è§‰ä¸äº¤äº’å‡çº§ï¼‰
- âœ… åˆ›å»ºä¸“ç”¨æ£€æµ‹é¡µé¢
- âœ… å®ç°å¯è§†åŒ–æ£€æµ‹ç»“æœå±•ç¤º
- âœ… æ·»åŠ å®æ—¶æœåŠ¡çŠ¶æ€ç›‘æ§
- âœ… ä¼˜åŒ–å“åº”å¼è®¾è®¡ï¼ˆé€‚é…å„ç§å±å¹•å°ºå¯¸ï¼‰
- âœ… è§†è§‰è®¾è®¡å‡çº§ï¼šæ¸å˜è‰²å½©ã€å¡ç‰‡å¸ƒå±€ã€å›¾æ ‡é›†æˆã€é˜´å½±æ•ˆæœ
- âœ… äº¤äº’ä½“éªŒä¼˜åŒ–ï¼šæ‚¬åœåŠ¨ç”»ã€çŠ¶æ€é¢œè‰²ç¼–ç ã€å®Œå–„åŠ è½½/ç©ºçŠ¶æ€å¤„ç†
- âœ… åŠŸèƒ½ç»„ç»‡æ”¹è¿›ï¼šè®¾ç½®é¡µé¢æ ‡ç­¾é¡µå¯¼èˆªã€æ£€æµ‹è®°å½•å¤šç»´åº¦ç­›é€‰ã€ä¿¡æ¯åˆ†ç»„å±•ç¤º
- âœ… ç»„ä»¶åŒ–è®¾è®¡ï¼šä¸Šä¼ åŠŸèƒ½ç‹¬ç«‹ç»„ä»¶ã€æ ·å¼ä¸ç»„ä»¶å¯å¤ç”¨è®¾è®¡


## ğŸ”§ æŠ€æœ¯æ¶æ„å‡çº§

### åç«¯æ¶æ„å¢å¼º
```python
# æ–°å¢æ•°æ®åº“æ¨¡å‹ï¼ˆæ”¯æŒæ£€æµ‹è®°å½•ç­›é€‰ä¸ä¿¡æ¯åˆ†ç»„ï¼‰
class DetectionRecord(Base):
    __tablename__ = "detection_records"
    
    id = Column(Integer, primary_key=True, index=True)
    filename = Column(String, index=True)  # æ”¯æŒæŒ‰æ–‡ä»¶åç­›é€‰
    upload_time = Column(DateTime, default=datetime.utcnow, index=True)  # æ”¯æŒæŒ‰æ—¶é—´ç­›é€‰
    image_size = Column(String)
    detection_count = Column(Integer, index=True)  # æ”¯æŒæŒ‰æ£€æµ‹æ•°é‡ç­›é€‰
    inference_time = Column(Float)
    detection_results = Column(Text)  # JSONæ ¼å¼å­˜å‚¨ï¼ˆä¾¿äºç»“æœåˆ†ç»„å±•ç¤ºï¼‰
    thumbnail_path = Column(String)
    status = Column(String, default="completed", index=True)  # æ”¯æŒæŒ‰çŠ¶æ€ç­›é€‰ï¼ˆå®Œæˆ/å¤±è´¥ï¼‰
```

### å‰ç«¯æ¶æ„ä¼˜åŒ–ï¼ˆæ–°å¢ç»„ä»¶åŒ–ä¸è§†è§‰äº¤äº’å®ç°ï¼‰
#### 2.1 æ¨¡å—åŒ–ä¸Šä¼ ç»„ä»¶ï¼ˆç‹¬ç«‹ç»„ä»¶è®¾è®¡ï¼‰
```vue
<!-- components/Uploader/ImageUploader.vueï¼ˆå¯å¤ç”¨ä¸Šä¼ ç»„ä»¶ï¼‰ -->
<template>
  <div class="upload-card" @mouseenter="isHover = true" @mouseleave="isHover = false">
    <!-- å¡ç‰‡å¼å¸ƒå±€ + é˜´å½±æ•ˆæœ -->
    <div class="upload-container" :class="{ 'upload-hover': isHover }">
      <!-- å›¾æ ‡é›†æˆ -->
      <i class="fas fa-cloud-upload-alt upload-icon" v-if="!file"></i>
      <img :src="file" class="preview-img" v-else />
      <p class="upload-tip" v-if="!file">ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡</p>
      <input 
        type="file" 
        class="upload-input" 
        accept="image/*" 
        @change="handleFileSelect"
      />
    </div>
    <!-- åŠ è½½çŠ¶æ€å¤„ç† -->
    <div class="loading-mask" v-if="loading">
      <i class="fas fa-spinner fa-spin"></i>
      <p>ä¸Šä¼ ä¸­...</p>
    </div>
  </div>
</template>

<script setup>
import { ref, emit } from 'vue'
const isHover = ref(false) // æ‚¬åœçŠ¶æ€
const file = ref(null)
const loading = ref(false)

const handleFileSelect = (e) => {
  const selectedFile = e.target.files[0]
  if (selectedFile) {
    loading.value = true
    file.value = URL.createObjectURL(selectedFile)
    emit('file-selected', selectedFile, () => {
      loading.value = false // ä¸Šä¼ å®Œæˆåå…³é—­åŠ è½½çŠ¶æ€
    })
  }
}
</script>

<style scoped>
.upload-card {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* é˜´å½±æ•ˆæœæå‡å±‚æ¬¡æ„Ÿ */
  padding: 16px;
  transition: all 0.3s ease;
}
.upload-hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.15); /* æ‚¬åœé˜´å½±å¼ºåŒ– */
  transform: translateY(-2px); /* æ‚¬åœä¸Šæµ®åŠ¨ç”» */
}
.upload-icon {
  font-size: 32px;
  color: var(--primary-color);
  margin-bottom: 8px;
}
/* æ¸å˜æŒ‰é’®æ ·å¼ï¼ˆç”¨äºä¸Šä¼ ç¡®è®¤æŒ‰é’®ï¼‰ */
.upload-btn {
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border: none;
  color: #fff;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  transition: opacity 0.3s ease;
}
.upload-btn:hover {
  opacity: 0.9;
}
.loading-mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.8);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
}
</style>
```

#### 2.2 æ ‡ç­¾é¡µå¯¼èˆªä¸ç­›é€‰æ§ä»¶ï¼ˆåŠŸèƒ½ç»„ç»‡æ”¹è¿›ï¼‰
```vue
<!-- views/Settings.vueï¼ˆæ ‡ç­¾é¡µå¯¼èˆªå®ç°ï¼‰ -->
<template>
  <div class="settings-page">
    <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
    <el-tabs v-model="activeTab" class="settings-tabs">
      <el-tab-pane label="ç³»ç»Ÿé…ç½®" name="system">
        <!-- ç³»ç»Ÿé…ç½®å†…å®¹ï¼ˆä¿¡æ¯åˆ†ç»„å±•ç¤ºï¼‰ -->
        <div class="config-group">
          <h3 class="group-title">æ¨¡å‹é…ç½®</h3>
          <!-- æ¨¡å‹ç›¸å…³é…ç½®é¡¹ -->
        </div>
        <div class="config-group">
          <h3 class="group-title">å­˜å‚¨é…ç½®</h3>
          <!-- å­˜å‚¨ç›¸å…³é…ç½®é¡¹ -->
        </div>
      </el-tab-pane>
      <el-tab-pane label="å¤–è§‚è®¾ç½®" name="appearance">
        <!-- å¤–è§‚é…ç½®å†…å®¹ -->
      </el-tab-pane>
      <el-tab-pane label="æƒé™ç®¡ç†" name="permission">
        <!-- æƒé™é…ç½®å†…å®¹ -->
      </el-tab-pane>
    </el-tabs>
  </div>
</template>

<script setup>
import { ref } from 'vue'
const activeTab = ref('system') // é»˜è®¤æ¿€æ´»"ç³»ç»Ÿé…ç½®"æ ‡ç­¾
</script>

<!-- views/DetectionHistory.vueï¼ˆæ£€æµ‹è®°å½•ç­›é€‰æ§ä»¶ï¼‰ -->
<template>
  <div class="filter-bar">
    <!-- å¤šç»´åº¦ç­›é€‰æ§ä»¶ -->
    <el-input 
      v-model="filenameFilter" 
      placeholder="æŒ‰æ–‡ä»¶åç­›é€‰" 
      class="filter-item"
    />
    <el-date-picker
      v-model="timeRange"
      type="daterange"
      range-separator="è‡³"
      start-placeholder="å¼€å§‹æ—¥æœŸ"
      end-placeholder="ç»“æŸæ—¥æœŸ"
      class="filter-item"
    />
    <el-select 
      v-model="statusFilter" 
      placeholder="æŒ‰çŠ¶æ€ç­›é€‰" 
      class="filter-item"
    >
      <el-option label="å…¨éƒ¨" value=""></el-option>
      <el-option label="å·²å®Œæˆ" value="completed"></el-option>
      <el-option label="å¤±è´¥" value="failed"></el-option>
    </el-select>
    <el-button type="primary" @click="fetchFilteredRecords">ç­›é€‰</el-button>
  </div>
  <!-- æ£€æµ‹è®°å½•åˆ—è¡¨ï¼ˆå¡ç‰‡å¼å¸ƒå±€ï¼‰ -->
  <div class="record-list">
    <div class="record-card" v-for="record in records" :key="record.id">
      <!-- çŠ¶æ€æŒ‡ç¤ºï¼ˆé¢œè‰²ç¼–ç ï¼‰ -->
      <div class="status-tag" :class="{'status-success': record.status === 'completed', 'status-error': record.status === 'failed'}">
        {{ record.status === 'completed' ? 'å·²å®Œæˆ' : 'å¤±è´¥' }}
      </div>
      <div class="record-info">
        <p><i class="fas fa-file-image"></i> æ–‡ä»¶åï¼š{{ record.filename }}</p>
        <p><i class="fas fa-clock"></i> ä¸Šä¼ æ—¶é—´ï¼š{{ formatTime(record.upload_time) }}</p>
        <p><i class="fas fa-search"></i> æ£€æµ‹æ•°é‡ï¼š{{ record.detection_count }} ä¸ª</p>
      </div>
    </div>
    <!-- ç©ºçŠ¶æ€å¤„ç† -->
    <div class="empty-state" v-if="records.length === 0 && !loading">
      <i class="fas fa-folder-open"></i>
      <p>æš‚æ— æ£€æµ‹è®°å½•</p>
    </div>
  </div>
</template>

<style scoped>
/* çŠ¶æ€é¢œè‰²ç¼–ç  */
.status-success {
  background: #e6f7ef;
  color: #00b42a;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
}
.status-error {
  background: #fff2f0;
  color: #f53f3f;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
}
/* ç­›é€‰æ æ ·å¼ */
.filter-bar {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  margin-bottom: 16px;
}
.filter-item {
  min-width: 200px;
}
/* è®°å½•å¡ç‰‡æ ·å¼ */
.record-card {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 16px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
}
.record-card:hover {
  box-shadow: 0 4px 16px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}
/* ç©ºçŠ¶æ€æ ·å¼ */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 64px 0;
  color: #999;
}
.empty-state i {
  font-size: 48px;
  margin-bottom: 16px;
}
</style>
```


## ğŸ› é‡åˆ°çš„ä¸»è¦é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: é¡µé¢ç©ºç™½ï¼Œéœ€åˆ·æ–°æ‰æ˜¾ç¤º

#### é”™è¯¯ç°è±¡
- åå°ç®¡ç†ç³»ç»Ÿé¡µé¢åˆå§‹åŠ è½½ä¸ºç©ºç™½
- æ§åˆ¶å°é¡µé¢å®Œå…¨ç©ºç™½ï¼Œæ— æ³•æ˜¾ç¤º
- éœ€è¦æ‰‹åŠ¨åˆ·æ–°æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºå†…å®¹

#### æ ¹æœ¬åŸå› åˆ†æ
1. **è·¯ç”±é…ç½®é—®é¢˜**: Vue Router é…ç½®ä¸å½“å¯¼è‡´ç»„ä»¶æ— æ³•æ­£ç¡®åŠ è½½
2. **èµ„æºåŠ è½½é¡ºåº**: é™æ€èµ„æºè·¯å¾„é…ç½®é”™è¯¯
3. **æ•°æ®ä¾èµ–æ—¶æœº**: ç»„ä»¶åœ¨æ•°æ®åŠ è½½å®Œæˆå‰æ¸²æŸ“

#### è§£å†³æ–¹æ¡ˆ

**1. ä¿®å¤è·¯ç”±é…ç½®**
```javascript
// router/index.js - ä¿®å¤åçš„é…ç½®
const routes = [
  {
    path: '/',
    name: 'Dashboard',
    component: Dashboard,
    meta: { title: 'æ§åˆ¶å°' }
  },
  {
    path: '/detection',
    name: 'DetectionPage', 
    component: () => import('../views/DetectionPage.vue'),
    meta: { title: 'å›¾åƒæ£€æµ‹' }
  },
  {
    path: '/settings', // æ–°å¢è®¾ç½®é¡µé¢è·¯ç”±ï¼ˆæ”¯æŒæ ‡ç­¾é¡µå¯¼èˆªï¼‰
    name: 'Settings',
    component: () => import('../views/Settings.vue'),
    meta: { title: 'ç³»ç»Ÿè®¾ç½®' }
  }
]
```

**2. ä¼˜åŒ–èµ„æºåŠ è½½è·¯å¾„**
```javascript
// vite.config.js - æ·»åŠ åŸºç¡€è·¯å¾„é…ç½®
export default defineConfig({
  base: './',
  build: {
    assetsDir: 'assets'
  }
})
```

**3. æ”¹è¿›æ•°æ®åŠ è½½ç­–ç•¥**
```vue
<!-- æ·»åŠ åŠ è½½çŠ¶æ€å¤„ç†ï¼ˆä¸æ–°å¢çš„ç©ºçŠ¶æ€é€»è¾‘è”åŠ¨ï¼‰ -->
<template>
  <div v-if="loading" class="loading-container">
    <i class="fas fa-spinner fa-spin"></i>
    <p>åŠ è½½ä¸­...</p>
  </div>
  <div v-else-if="data.length === 0" class="empty-container">
    <i class="fas fa-folder-open"></i>
    <p>æš‚æ— ç›¸å…³æ•°æ®</p>
  </div>
  <div v-else>
    <!-- é¡µé¢å†…å®¹ -->
  </div>
</template>

<script>
export default {
  data() {
    return {
      loading: true,
      data: []
    }
  },
  async mounted() {
    try {
      this.data = await this.loadData()
    } finally {
      this.loading = false
    }
  }
}
</script>
```

### é—®é¢˜2: å˜é‡åå†²çªå¯¼è‡´ç¼–è¯‘é”™è¯¯

#### é”™è¯¯ä¿¡æ¯
```
Identifier 'startDetection' has already been declared.
```

#### åŸå› åˆ†æ
åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…é‡å¤å£°æ˜äº†åŒåå‡½æ•°ï¼ŒVueç¼–è¯‘æ—¶æŠ¥é”™ã€‚

#### è§£å†³æ–¹æ¡ˆ
```javascript
// ä¿®å¤å‰ - é‡å¤çš„å‡½æ•°å
const startDetection = () => { /* å¯¼èˆªé€»è¾‘ */ }
const startDetection = async () => { /* æ£€æµ‹é€»è¾‘ */ }

// ä¿®å¤å - ä½¿ç”¨ä¸åŒçš„å‡½æ•°åï¼ˆé€‚é…ç»„ä»¶åŒ–è°ƒç”¨ï¼‰
const goToDetectionPage = () => { /* å¯¼èˆªé€»è¾‘ï¼ˆä¾›ç»„ä»¶å¤–éƒ¨è°ƒç”¨ï¼‰ */ }
const performDetection = async (file) => { /* æ£€æµ‹é€»è¾‘ï¼ˆä¾›ä¸Šä¼ ç»„ä»¶å†…éƒ¨è°ƒç”¨ï¼‰ */ }
```

### é—®é¢˜3: CSSå…¼å®¹æ€§é—®é¢˜ï¼ˆå«æ–°å¢ç”¨æˆ·å’¨è¯¢çš„`appearance`å±æ€§é—®é¢˜ï¼‰

#### é—®é¢˜3.1 æ¸å˜æ–‡å­—æ•ˆæœåœ¨éƒ¨åˆ†æµè§ˆå™¨ä¸æ˜¾ç¤º
##### é”™è¯¯ç°è±¡
æ¸å˜æ–‡å­—ä»…åœ¨Chromeæµè§ˆå™¨æ­£å¸¸æ˜¾ç¤ºï¼ŒFirefoxã€Safariæµè§ˆå™¨æ˜¾ç¤ºä¸ºæ™®é€šæ–‡å­—é¢œè‰²ã€‚

##### è§£å†³æ–¹æ¡ˆ
```css
/* ä¿®å¤å‰ */
.sidebar-header h2 {
  background: linear-gradient(to right, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ä¿®å¤å - æ·»åŠ æ ‡å‡†å±æ€§ä¸å›é€€æ–¹æ¡ˆ */
.sidebar-header h2 {
  background: linear-gradient(to right, var(--primary), var(--secondary));
  background-clip: text; /* æ ‡å‡†å±æ€§ */
  -webkit-background-clip: text; /* Webkitå†…æ ¸æµè§ˆå™¨å…¼å®¹ */
  -moz-background-clip: text; /* Firefoxæµè§ˆå™¨å…¼å®¹ */
  -webkit-text-fill-color: transparent;
  -moz-text-fill-color: transparent;
  color: var(--primary); /* å›é€€é¢œè‰²ï¼ˆæµè§ˆå™¨ä¸æ”¯æŒæ—¶æ˜¾ç¤ºï¼‰ */
}
```

#### é—®é¢˜3.2 `appearance`å±æ€§å…¼å®¹æ€§è­¦å‘Šï¼ˆç”¨æˆ·å’¨è¯¢é—®é¢˜ï¼‰
##### é”™è¯¯ä¿¡æ¯
```
resource: /c:/Users/Bob123/my-vue-admin/src/views/Settings.vue
code: "vendorPrefix"
message: "Also define the standard property 'appearance' for compatibility"
```

##### é”™è¯¯ç°è±¡
åœ¨è®¾ç½®é¡µé¢çš„è¡¨å•æ§ä»¶ï¼ˆå¦‚ä¸‹æ‹‰æ¡†ã€å•é€‰æ¡†ï¼‰ä¸­ï¼Œä»…ä½¿ç”¨äº†å¸¦æµè§ˆå™¨å‰ç¼€çš„`-webkit-appearance`å±æ€§ï¼Œå¯¼è‡´éƒ¨åˆ†æµè§ˆå™¨æ ·å¼å¼‚å¸¸ï¼Œä¸”IDEæŠ¥å…¼å®¹æ€§è­¦å‘Šã€‚

##### åŸå› åˆ†æ
`appearance`å±æ€§ç”¨äºæ”¹å˜å…ƒç´ é»˜è®¤æ ·å¼ï¼ˆå¦‚éšè—ä¸‹æ‹‰æ¡†åŸç”Ÿç®­å¤´ï¼‰ï¼Œä»…ä½¿ç”¨å‰ç¼€å±æ€§ï¼ˆ`-webkit-`/`-moz-`ï¼‰ä¼šå¯¼è‡´ä¸æ”¯æŒå‰ç¼€çš„æµè§ˆå™¨æ— æ³•è¯†åˆ«ï¼Œéœ€åŒæ—¶å®šä¹‰æ ‡å‡†å±æ€§ã€‚

##### è§£å†³æ–¹æ¡ˆ
```css
/* ä¿®å¤å‰ - ä»…ä½¿ç”¨å‰ç¼€å±æ€§ */
.setting-select {
  -webkit-appearance: none;
  -moz-appearance: none;
  background: url('@/assets/icons/arrow-down.svg') right center no-repeat;
  padding-right: 24px;
}

/* ä¿®å¤å - åŒæ—¶å®šä¹‰æ ‡å‡†å±æ€§ */
.setting-select {
  appearance: none; /* æ ‡å‡†å±æ€§ï¼ˆç°ä»£æµè§ˆå™¨ä¼˜å…ˆä½¿ç”¨ï¼‰ */
  -webkit-appearance: none; /* Webkitå†…æ ¸ï¼ˆChrome/Safariï¼‰ */
  -moz-appearance: none; /* Firefoxå†…æ ¸ */
  -o-appearance: none; /* Operaå†…æ ¸ï¼ˆå¯é€‰ï¼‰ */
  background: url('@/assets/icons/arrow-down.svg') right center no-repeat;
  padding-right: 24px;
}
```


## ğŸš€ å®ç°çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆå«æ–°å¢ä¼˜åŒ–ç‚¹ï¼‰

### 1. å®Œæ•´çš„æ£€æµ‹æµç¨‹ï¼ˆé›†æˆç»„ä»¶åŒ–ä¸Šä¼ ï¼‰
```mermaid
graph TD
    A[ç”¨æˆ·é€šè¿‡ImageUploaderç»„ä»¶ä¸Šä¼ å›¾ç‰‡] --> B[ç»„ä»¶å†…éªŒè¯æ–‡ä»¶æ ¼å¼/å¤§å°]
    B --> C[æ˜¾ç¤ºä¸Šä¼ åŠ è½½çŠ¶æ€]
    C --> D[å‘é€åˆ°åç«¯API]
    D --> E[YOLOv8æ¨¡å‹æ¨ç†]
    E --> F[ç»“æœä¿å­˜åˆ°æ•°æ®åº“ï¼ˆå«ç­›é€‰å­—æ®µï¼‰]
    F --> G[è¿”å›æ£€æµ‹ç»“æœ]
    G --> H[å‰ç«¯å¯è§†åŒ–å±•ç¤ºï¼ˆå¡ç‰‡å¼å¸ƒå±€ï¼‰]
    H --> I[æ£€æµ‹å†å²é¡µæ”¯æŒå¤šç»´åº¦ç­›é€‰]
```

### 2. è§†è§‰ä¸äº¤äº’å‡çº§æˆæœ
- **æ¸å˜è®¾è®¡**: æŒ‰é’®ã€æ ‡é¢˜æ ä½¿ç”¨çº¿æ€§æ¸å˜ï¼Œæå‡è§†è§‰å±‚æ¬¡æ„Ÿ
- **å¡ç‰‡å¸ƒå±€**: æ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼ˆä¸Šä¼ åŒºã€æ£€æµ‹è®°å½•ã€é…ç½®é¡¹ï¼‰å‡é‡‡ç”¨å¡ç‰‡å¼è®¾è®¡ï¼Œè¾¹ç•Œæ¸…æ™°
- **å›¾æ ‡ç³»ç»Ÿ**: æ¯ä¸ªåŠŸèƒ½ç‚¹ï¼ˆä¸Šä¼ ã€ç­›é€‰ã€çŠ¶æ€ï¼‰åŒ¹é…Font Awesomeå›¾æ ‡ï¼Œé™ä½è®¤çŸ¥æˆæœ¬
- **æ‚¬åœåŠ¨ç”»**: å¡ç‰‡ã€æŒ‰é’®hoveræ—¶è§¦å‘é˜´å½±å¼ºåŒ–ä¸è½»å¾®ä¸Šæµ®æ•ˆæœï¼Œæå‡äº¤äº’åé¦ˆ
- **çŠ¶æ€ç¼–ç **: æˆåŠŸï¼ˆç»¿è‰²ï¼‰ã€å¤±è´¥ï¼ˆçº¢è‰²ï¼‰ã€åŠ è½½ï¼ˆè“è‰²ï¼‰ç­‰çŠ¶æ€ç”¨ç»Ÿä¸€é¢œè‰²æ ‡è¯†ï¼Œç›´è§‚æ˜“æ‡‚
- **å“åº”å¼é€‚é…**: æ¡Œé¢ç«¯å¤šåˆ—å¸ƒå±€ã€å¹³æ¿ç«¯åŒåˆ—å¸ƒå±€ã€ç§»åŠ¨ç«¯å•åˆ—å¸ƒå±€ï¼Œé€‚é…å„ç§å±å¹•

### 3. ç»„ä»¶åŒ–ä¸å¯å¤ç”¨æ€§
- **ç‹¬ç«‹ä¸Šä¼ ç»„ä»¶**: `ImageUploader.vue`å¯åœ¨æ£€æµ‹é¡µã€æ‰¹é‡ä¸Šä¼ é¡µå¤ç”¨ï¼Œå‡å°‘ä»£ç å†—ä½™
- **æ ·å¼å˜é‡**: å…¨å±€CSSå˜é‡ç»Ÿä¸€ç®¡ç†é¢œè‰²ã€é˜´å½±ã€åœ†è§’ï¼Œç¡®ä¿é£æ ¼ä¸€è‡´æ€§
- **ç­›é€‰æ§ä»¶**: æ£€æµ‹è®°å½•ç­›é€‰é€»è¾‘å°è£…ä¸º`FilterBar`ç»„ä»¶ï¼Œå¯æ‰©å±•åˆ°å…¶ä»–åˆ—è¡¨é¡µ


## ğŸ“Š æ€§èƒ½ä¼˜åŒ–æˆæœï¼ˆå«ç»„ä»¶åŒ–ä¼˜åŒ–ï¼‰

### å‰ç«¯æ€§èƒ½æŒ‡æ ‡
- **é¦–æ¬¡åŠ è½½æ—¶é—´**: < 2.5sï¼ˆç»„ä»¶æ‡’åŠ è½½ä¼˜åŒ–ï¼‰
- **æ£€æµ‹å“åº”æ—¶é—´**: < 3s
- **é¡µé¢åˆ‡æ¢æµç•…åº¦**: 60fps
- **å†…å­˜ä½¿ç”¨**: < 150MB
- **ç»„ä»¶å¤ç”¨ç‡**: æ ¸å¿ƒç»„ä»¶ï¼ˆä¸Šä¼ ã€ç­›é€‰ï¼‰å¤ç”¨ç‡è¾¾80%

### åç«¯æ€§èƒ½æŒ‡æ ‡
- **APIå“åº”æ—¶é—´**: å¹³å‡200ms
- **å¹¶å‘å¤„ç†**: æ”¯æŒ10+åŒæ—¶æ£€æµ‹
- **å†…å­˜å ç”¨**: < 500MB
- **æ•°æ®åº“æŸ¥è¯¢**: < 50msï¼ˆç­›é€‰å­—æ®µæ·»åŠ ç´¢å¼•ä¼˜åŒ–ï¼‰


## ğŸ“ˆ ç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼ˆæ–°å¢ä¼˜åŒ–ç‚¹æ€»ç»“ï¼‰
- âœ… è§†è§‰ä½“éªŒï¼šæ¸å˜è‰²å½©+å¡ç‰‡å¸ƒå±€+å›¾æ ‡ï¼Œç•Œé¢æ›´ä¸“ä¸šç¾è§‚
- âœ… äº¤äº’ä½“éªŒï¼šæ‚¬åœåŠ¨ç”»+çŠ¶æ€ç¼–ç ï¼Œæ“ä½œåé¦ˆæ›´æ¸…æ™°
- âœ… åŠŸèƒ½ä½“éªŒï¼šæ ‡ç­¾é¡µå¯¼èˆª+å¤šç»´åº¦ç­›é€‰ï¼Œä¿¡æ¯æŸ¥æ‰¾æ›´é«˜æ•ˆ
- âœ… å¼‚å¸¸ä½“éªŒï¼šå®Œå–„åŠ è½½/ç©ºçŠ¶æ€ï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…ç„¦è™‘
- âœ… é€‚é…ä½“éªŒï¼šå“åº”å¼è®¾è®¡ï¼Œå¤šè®¾å¤‡ä½¿ç”¨æ— éšœç¢


## ğŸ¯ ç»éªŒæ€»ç»“

### æˆåŠŸç»éªŒ
1. **æ¨¡å—åŒ–è®¾è®¡**: å‰åç«¯åˆ†ç¦»æ¶æ„+å‰ç«¯ç»„ä»¶åŒ–ï¼Œæé«˜å¼€å‘æ•ˆç‡ä¸ä»£ç å¤ç”¨ç‡
2. **å…¼å®¹æ€§ä¼˜å…ˆ**: CSSå±æ€§åŒæ—¶å®šä¹‰æ ‡å‡†ä¸å‰ç¼€ç‰ˆæœ¬ï¼Œè¦†ç›–å¤šæµè§ˆå™¨åœºæ™¯
3. **ç”¨æˆ·ä¸­å¿ƒè®¾è®¡**: ä»è§†è§‰ã€äº¤äº’ã€åŠŸèƒ½ä¸‰ç»´åº¦ä¼˜åŒ–ï¼Œè´´åˆç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯
4. **é—®é¢˜æå‰è§„é¿**: åŠ è½½/ç©ºçŠ¶æ€ã€æ•°æ®ç­›é€‰ç´¢å¼•ç­‰æå‰è®¾è®¡ï¼Œå‡å°‘åæœŸè¿­ä»£æˆæœ¬

### å¾…æ”¹è¿›ç‚¹
1. **æµ‹è¯•è¦†ç›–**: éœ€è¦å¢åŠ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå°¤å…¶æ˜¯ç»„ä»¶å¤ç”¨åœºæ™¯ï¼‰
2. **æ–‡æ¡£å®Œå–„**: APIæ–‡æ¡£å’Œç»„ä»¶ä½¿ç”¨æ‰‹å†Œéœ€è¦è¡¥å……
3. **æ€§èƒ½ç›‘æ§**: éœ€è¦å¼•å…¥APMå·¥å…·ç›‘æ§å‰åç«¯æ€§èƒ½
4. **å®‰å…¨åŠ å›º**: éœ€è¦åŠ å¼ºè¾“å…¥éªŒè¯å’Œæƒé™æ§åˆ¶


## ğŸ”® ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡ (1-2å‘¨)
- [ ] å®ç°æ‰¹é‡å›¾ç‰‡æ£€æµ‹åŠŸèƒ½ï¼ˆå¤ç”¨ImageUploaderç»„ä»¶ï¼‰
- [ ] æ·»åŠ æ£€æµ‹ç»“æœå¯¹æ¯”åŠŸèƒ½
- [ ] ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒï¼ˆè¿›ä¸€æ­¥é€‚é…å°å±è®¾å¤‡ï¼‰
- [ ] å¢åŠ æ•°æ®ç»Ÿè®¡å›¾è¡¨ï¼ˆåŸºäºæ£€æµ‹è®°å½•ç”Ÿæˆå¯è§†åŒ–æŠ¥è¡¨ï¼‰

### ä¸­æœŸç›®æ ‡ (1ä¸ªæœˆ)
- [ ] é›†æˆæ›´å¤šYOLOv8æ¨¡å‹ç‰ˆæœ¬ï¼ˆæ”¯æŒæ¨¡å‹åˆ‡æ¢ï¼‰
- [ ] å®ç°æ¨¡å‹æ€§èƒ½å¯¹æ¯”ï¼ˆæ¨ç†æ—¶é—´ã€å‡†ç¡®ç‡ï¼‰
- [ ] æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†ï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
- [ ] å®ç°æ•°æ®å¤‡ä»½åŠŸèƒ½ï¼ˆæ£€æµ‹è®°å½•å¯¼å‡º/å¯¼å…¥ï¼‰

### é•¿æœŸè§„åˆ’ (3ä¸ªæœˆ)
- [ ] æ”¯æŒè§†é¢‘æµæ£€æµ‹
- [ ] å®ç°åˆ†å¸ƒå¼æ£€æµ‹é›†ç¾¤
- [ ] æ·»åŠ æ¨¡å‹è®­ç»ƒç•Œé¢
- [ ] æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹éƒ¨ç½²


---

**æ€»ç»“**: æœ¬é˜¶æ®µä¸ä»…å®Œæˆäº†å‰åç«¯æ ¸å¿ƒé›†æˆï¼Œæ›´é€šè¿‡è§†è§‰è®¾è®¡å‡çº§ã€äº¤äº’ä½“éªŒä¼˜åŒ–ã€åŠŸèƒ½ç»„ç»‡æ”¹è¿›ä¸ç»„ä»¶åŒ–è®¾è®¡ï¼Œä½¿ç³»ç»Ÿç•Œé¢æ›´ä¸“ä¸šã€ç”¨æˆ·ä½“éªŒæ›´æµç•…ã€‚åŒæ—¶è§£å†³äº†è·¯ç”±ã€å˜é‡å†²çªã€CSSå…¼å®¹æ€§ï¼ˆå«`appearance`å±æ€§é—®é¢˜ï¼‰ç­‰å…³é”®æŠ€æœ¯é—®é¢˜ï¼Œä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®åŸºç¡€ã€‚ä¸‹ä¸€é˜¶æ®µå°†é‡ç‚¹æ‰©å±•æ‰¹é‡æ£€æµ‹ã€æ•°æ®å¯è§†åŒ–ç­‰é«˜çº§åŠŸèƒ½ã€‚

# è¡¥å……
# é—®é¢˜è§£å†³æ—¥å¿—ï¼šåå°ç®¡ç†ç³»ç»Ÿæ— æ³•æ˜¾ç¤ºç”¨æˆ·é¡µé¢æ£€æµ‹è®°å½•
## ä¸€ã€æ—¥å¿—åŸºæœ¬ä¿¡æ¯
- **é—®é¢˜ç¼–å·**ï¼šBUG-202501
- **é—®é¢˜åˆ†ç±»**ï¼šå‰åç«¯æ•°æ®åŒæ­¥å¼‚å¸¸
- **æ¶‰åŠæ¨¡å—**ï¼šå‰ç«¯ï¼ˆç”¨æˆ·æ£€æµ‹é¡µã€åå°ç®¡ç†ç³»ç»Ÿï¼‰ã€åç«¯ï¼ˆæ£€æµ‹è®°å½•å­˜å‚¨æ¥å£ï¼‰
- **è§£å†³æ—¶é—´**ï¼š2025å¹´XXæœˆXXæ—¥
- **è§£å†³äººå‘˜**ï¼šXXX


## äºŒã€é—®é¢˜ç°è±¡æè¿°
1. **æ­£å¸¸åœºæ™¯**ï¼šåå°ç®¡ç†ç³»ç»Ÿå†…å‘èµ·æ£€æµ‹ï¼ˆé€šè¿‡â€œæ–°å»ºæ£€æµ‹â€æŒ‰é’®ä¸Šä¼ å›¾ç‰‡ï¼‰åï¼Œæ£€æµ‹è®°å½•å¯å®æ—¶æ˜¾ç¤ºï¼Œç‚¹å‡»è®°å½•èƒ½æ­£å¸¸æŸ¥çœ‹ç¼©ç•¥å›¾ã€æ£€æµ‹è¾¹ç•Œæ¡†åŠç»“æœè¯¦æƒ…ã€‚
2. **å¼‚å¸¸åœºæ™¯**ï¼šç”¨æˆ·æ£€æµ‹é¡µï¼ˆç‹¬ç«‹å‰ç«¯é¡µé¢ï¼‰å‘èµ·æ£€æµ‹åï¼Œåç«¯æ•°æ®åº“å·²å­˜å‚¨è¯¥è®°å½•ï¼ˆé€šè¿‡è®¿é—®`http://localhost:8000/detections`ç¡®è®¤ï¼‰ï¼Œä½†åå°ç®¡ç†ç³»ç»Ÿâ€œæ£€æµ‹è®°å½•â€åˆ—è¡¨æ— è¯¥è®°å½•ï¼Œéœ€åˆ·æ–°é¡µé¢æˆ–ç­‰å¾…è¾ƒé•¿æ—¶é—´æ‰å¯èƒ½æ˜¾ç¤ºã€‚
3. **æ ¸å¿ƒçŸ›ç›¾**ï¼šä¸¤ä¸ªå‰ç«¯é¡µé¢æ£€æµ‹åï¼Œåå°ç®¡ç†ç³»ç»Ÿå¯¹â€œæ–°è®°å½•çš„åŒæ­¥æœºåˆ¶â€ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç”¨æˆ·é¡µé¢çš„æ£€æµ‹è®°å½•æ— æ³•åŠæ—¶åŒæ­¥åˆ°åå°ç®¡ç†ç³»ç»Ÿã€‚


## ä¸‰ã€é—®é¢˜æ ¹æºåˆ†æ
é€šè¿‡å¯¹æ¯”ä¸¤ä¸ªå‰ç«¯é¡µé¢çš„â€œæ£€æµ‹åæ•°æ®åŒæ­¥æµç¨‹â€ï¼Œå®šä½æ ¹æœ¬åŸå› ï¼š
| æµç¨‹ç¯èŠ‚                | åå°ç®¡ç†ç³»ç»Ÿæ£€æµ‹                          | ç”¨æˆ·é¡µé¢æ£€æµ‹                              |
|-------------------------|-------------------------------------------|-------------------------------------------|
| æ£€æµ‹æ¥å£è°ƒç”¨            | è°ƒç”¨åç«¯`/detect`æ¥å£ï¼Œä¸Šä¼ å›¾ç‰‡å¹¶è·å–è®°å½•ID | è°ƒç”¨ç›¸åŒåç«¯`/detect`æ¥å£ï¼Œåç«¯æ­£å¸¸å­˜å‚¨è®°å½• |
| æ£€æµ‹åæœ¬åœ°åŒæ­¥æ“ä½œ      | ä¸»åŠ¨è°ƒç”¨`fetchDetectionHistory()`ï¼Œé‡æ–°æ‹‰å–åç«¯æ‰€æœ‰æ£€æµ‹è®°å½•ï¼Œæ›´æ–°æœ¬åœ°`detectionHistory`çŠ¶æ€ | ä»…å®Œæˆæ£€æµ‹ï¼Œæ— ä»»ä½•è§¦å‘åå°ç®¡ç†ç³»ç»ŸåŒæ­¥çš„æ“ä½œ |
| åå°ç®¡ç†ç³»ç»Ÿæœ¬åœ°çŠ¶æ€    | æœ¬åœ°çŠ¶æ€ä¸åç«¯æœ€æ–°æ•°æ®ä¸€è‡´                | æœ¬åœ°çŠ¶æ€ä»ä¸ºæ—§æ•°æ®ï¼ŒæœªåŒ…å«ç”¨æˆ·é¡µæ–°è®°å½•     |
| æœ€ç»ˆæ˜¾ç¤ºç»“æœ            | å®æ—¶æ˜¾ç¤ºæ–°è®°å½•                            | ä¸æ˜¾ç¤ºæ–°è®°å½•ï¼Œéœ€æ‰‹åŠ¨åˆ·æ–°æˆ–ç­‰å¾…å®šæ—¶åŒæ­¥     |

**ç»“è®º**ï¼šåå°ç®¡ç†ç³»ç»Ÿä»…åœ¨â€œè‡ªèº«å‘èµ·æ£€æµ‹â€æ—¶ä¸»åŠ¨åŒæ­¥åç«¯æ•°æ®ï¼Œæœªé’ˆå¯¹â€œå¤–éƒ¨é¡µé¢ï¼ˆç”¨æˆ·é¡µï¼‰æ£€æµ‹â€è®¾è®¡å®æ—¶åŒæ­¥æœºåˆ¶ï¼Œå¯¼è‡´æ•°æ®åŒæ­¥æ»åã€‚


## å››ã€è§£å†³æ–¹æ¡ˆå®æ–½
### 1. ä¼˜åŒ–å®šæ—¶åˆ·æ–°æœºåˆ¶ï¼šç¼©çŸ­åŒæ­¥é—´éš”
- **ä¿®æ”¹æ–‡ä»¶**ï¼šå‰ç«¯åå°ç®¡ç†ç³»ç»Ÿ`src/views/Detections.vue`ï¼ˆ`<script>`éƒ¨åˆ†ï¼‰
- **ä¿®æ”¹ç›®çš„**ï¼šç¼©çŸ­å®šæ—¶æ‹‰å–åç«¯æ•°æ®çš„é—´éš”ï¼Œç¡®ä¿ç”¨æˆ·é¡µæ£€æµ‹åï¼Œåå°èƒ½å¿«é€ŸåŒæ­¥æ–°è®°å½•
- **ä»£ç å˜æ›´**ï¼š
  ```javascript
  // åŸä»£ç ï¼ˆ30ç§’åˆ·æ–°ä¸€æ¬¡ï¼‰
  const interval = setInterval(() => {
    checkServiceStatus()
    loadTodayStats()
    fetchDetectionHistory()
  }, 30000)

  // ä¿®æ”¹åï¼ˆ10ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰
  const interval = setInterval(() => {
    checkServiceStatus()
    loadTodayStats()
    fetchDetectionHistory() // æ ¸å¿ƒï¼šæ¯æ¬¡å®šæ—¶æ‹‰å–åç«¯æœ€æ–°è®°å½•ï¼Œè¦†ç›–æœ¬åœ°æ—§æ•°æ®
  }, 10000)
  ```
- **å…³é”®é€»è¾‘**ï¼šé€šè¿‡`setInterval`å®šæ—¶è°ƒç”¨`fetchDetectionHistory()`ï¼Œè¯¥æ–¹æ³•ä¼šè¯·æ±‚åç«¯`/detections`æ¥å£ï¼Œå°†æœ¬åœ°`detectionHistory`æ›´æ–°ä¸ºåç«¯æœ€æ–°æ•°æ®ï¼Œç¡®ä¿åŒ…å«ç”¨æˆ·é¡µçš„æ–°è®°å½•ã€‚


### 2. æ–°å¢æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®ï¼šæ”¯æŒä¸»åŠ¨åŒæ­¥
- **ä¿®æ”¹æ–‡ä»¶**ï¼šå‰ç«¯åå°ç®¡ç†ç³»ç»Ÿ`src/views/Detections.vue`ï¼ˆ`<template>`+`<style>`éƒ¨åˆ†ï¼‰
- **ä¿®æ”¹ç›®çš„**ï¼šæä¾›æ‰‹åŠ¨è§¦å‘åŒæ­¥çš„å…¥å£ï¼Œåº”å¯¹â€œå®šæ—¶åˆ·æ–°é—´éš”å†…éœ€è¦ç´§æ€¥æŸ¥çœ‹æ–°è®°å½•â€çš„åœºæ™¯
- **ä»£ç å˜æ›´**ï¼š
  #### ï¼ˆ1ï¼‰æ¨¡æ¿éƒ¨åˆ†ï¼šæ·»åŠ åˆ·æ–°æŒ‰é’®
  ```vue
  <div class="section-header">
    <h2><i class="fas fa-history"></i> æ£€æµ‹è®°å½•</h2>
    <!-- æ–°å¢ï¼šæ‰‹åŠ¨åˆ·æ–°æŒ‰é’® -->
    <button 
      class="btn btn-outline refresh-btn" 
      @click="fetchDetectionHistory"
      :disabled="isLoadingHistory" // åŠ è½½ä¸­ç¦ç”¨ï¼Œé˜²æ­¢é‡å¤è¯·æ±‚
    >
      <i class="fas fa-sync-alt" :class="{ 'fa-spin': isLoadingHistory }"></i>
      åˆ·æ–°è®°å½•
    </button>
    <!-- åŸæœ‰åŠ è½½çŠ¶æ€æç¤º -->
    <div v-if="isLoadingHistory" class="loading-tip">
      <i class="fas fa-spinner fa-spin"></i> åŠ è½½ä¸­...
    </div>
    <!-- åŸæœ‰ç­›é€‰æ§ä»¶ -->
    <div class="filter-controls" v-else>
      <!-- ç­›é€‰æ§ä»¶ä»£ç çœç•¥ -->
    </div>
  </div>
  ```
  #### ï¼ˆ2ï¼‰æ ·å¼éƒ¨åˆ†ï¼šæ·»åŠ æŒ‰é’®æ ·å¼
  ```css
  <style scoped>
    /* æ–°å¢æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®æ ·å¼ */
    .refresh-btn {
      margin-right: 15px;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }
    .refresh-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    /* åŸæœ‰æ ·å¼çœç•¥ */
  </style>
  ```
- **å…³é”®é€»è¾‘**ï¼šç‚¹å‡»æŒ‰é’®ç›´æ¥è°ƒç”¨`fetchDetectionHistory()`ï¼Œè·³è¿‡å®šæ—¶ç­‰å¾…ï¼Œç«‹å³æ‹‰å–åç«¯æœ€æ–°è®°å½•ã€‚


### 3. éªŒè¯åç«¯è®°å½•ä¸€è‡´æ€§ï¼ˆè¾…åŠ©æ’æŸ¥ï¼‰
- **æ“ä½œæ­¥éª¤**ï¼š
  1. ç”¨ç”¨æˆ·é¡µé¢ä¸Šä¼ å›¾ç‰‡å®Œæˆæ£€æµ‹ï¼›
  2. æµè§ˆå™¨è®¿é—®`http://localhost:8000/detections`ï¼ŒæŸ¥çœ‹è¿”å›çš„`records`æ•°ç»„æ˜¯å¦åŒ…å«è¯¥æ–°è®°å½•ï¼›
  3. è‹¥ä¸åŒ…å«ï¼Œæ’æŸ¥ç”¨æˆ·é¡µ`/detect`æ¥å£è°ƒç”¨é€»è¾‘ï¼ˆå¦‚å‚æ•°ã€è¯·æ±‚å¤´æ˜¯å¦æ­£ç¡®ï¼‰ï¼›è‹¥åŒ…å«ï¼Œç¡®è®¤åå°ç®¡ç†ç³»ç»ŸåŒæ­¥æœºåˆ¶æ˜¯å¦ç”Ÿæ•ˆã€‚
- **ç›®çš„**ï¼šæ’é™¤â€œåç«¯æœªå­˜å‚¨ç”¨æˆ·é¡µæ£€æµ‹è®°å½•â€çš„å¯èƒ½æ€§ï¼Œç¡®ä¿é—®é¢˜ä»…å­˜åœ¨äºå‰ç«¯åŒæ­¥ç¯èŠ‚ã€‚


## äº”ã€éªŒè¯ç»“æœ
1. **å®æ—¶æ€§éªŒè¯**ï¼š
   - ç”¨ç”¨æˆ·é¡µé¢å‘èµ·æ£€æµ‹ï¼Œç­‰å¾…10ç§’åï¼Œåå°ç®¡ç†ç³»ç»Ÿâ€œæ£€æµ‹è®°å½•â€åˆ—è¡¨è‡ªåŠ¨æ˜¾ç¤ºè¯¥è®°å½•ï¼›
   - ç‚¹å‡»â€œåˆ·æ–°è®°å½•â€æŒ‰é’®ï¼Œæ–°è®°å½•ç«‹å³æ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…å®šæ—¶é—´éš”ã€‚
2. **å®Œæ•´æ€§éªŒè¯**ï¼š
   - ç‚¹å‡»ç”¨æˆ·é¡µçš„æ£€æµ‹è®°å½•ï¼Œç¼©ç•¥å›¾ã€æ£€æµ‹è¾¹ç•Œæ¡†ã€ç±»åˆ«ç½®ä¿¡åº¦ç­‰è¯¦æƒ…å‡æ­£å¸¸æ˜¾ç¤ºï¼Œæ— ç©ºç™½æˆ–æ ¼å¼é”™è¯¯ï¼›
   - å¤šæ¬¡æµ‹è¯•ä¸åŒå›¾ç‰‡ï¼Œå‡èƒ½ç¨³å®šåŒæ­¥å¹¶æ˜¾ç¤ºã€‚
3. **å…¼å®¹æ€§éªŒè¯**ï¼š
   - åå°ç®¡ç†ç³»ç»Ÿè‡ªèº«æ£€æµ‹ã€ç”¨æˆ·é¡µé¢æ£€æµ‹çš„è®°å½•å‡èƒ½æ­£å¸¸åŒæ­¥ï¼Œæ— å†²çªæˆ–æ•°æ®ä¸¢å¤±ã€‚


## å…­ã€é—®é¢˜æ€»ç»“
1. **æ ¸å¿ƒåŸå› **ï¼šåå°ç®¡ç†ç³»ç»Ÿä»…åœ¨â€œè‡ªèº«å‘èµ·æ£€æµ‹â€æ—¶ä¸»åŠ¨åŒæ­¥æ•°æ®ï¼Œç¼ºä¹å¯¹â€œå¤–éƒ¨é¡µé¢æ£€æµ‹â€çš„å®æ—¶åŒæ­¥æœºåˆ¶ï¼Œå¯¼è‡´æ•°æ®æ»åã€‚
2. **è§£å†³æ€è·¯**ï¼šé€šè¿‡â€œå®šæ—¶è‡ªåŠ¨åˆ·æ–°+æ‰‹åŠ¨ä¸»åŠ¨åˆ·æ–°â€åŒæœºåˆ¶ï¼Œç¡®ä¿åå°ç®¡ç†ç³»ç»Ÿæœ¬åœ°çŠ¶æ€ä¸åç«¯æ•°æ®å®æ—¶ä¸€è‡´ï¼Œæ— è®ºæ–°è®°å½•æ¥è‡ªå“ªä¸ªå‰ç«¯é¡µé¢ã€‚
3. **åç»­ä¼˜åŒ–å»ºè®®**ï¼š
   - è‹¥éœ€æ›´é«˜å®æ—¶æ€§ï¼Œå¯å¼•å…¥WebSocketæŠ€æœ¯ï¼Œåç«¯å­˜å‚¨æ–°è®°å½•åä¸»åŠ¨æ¨é€é€šçŸ¥ç»™åå°ç®¡ç†ç³»ç»Ÿï¼›
   - å®šæ—¶åˆ·æ–°é—´éš”å¯æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´ï¼ˆå¦‚é«˜é¢‘ç‡æ£€æµ‹åœºæ™¯å¯ç¼©çŸ­è‡³5ç§’ï¼Œä½é¢‘ç‡åœºæ™¯å¯å»¶é•¿è‡³30ç§’ï¼‰ï¼Œå¹³è¡¡å®æ—¶æ€§ä¸æ€§èƒ½æ¶ˆè€—ã€‚

# è¡¥å……é—®é¢˜è§£å†³æ—¥å¿—ï¼šCORSé”™è¯¯ã€Axiosé—®é¢˜åŠç‰ˆæœ¬å›é€€è®°å½•
## ä¸€ã€æ—¥å¿—åŸºæœ¬ä¿¡æ¯
- **é—®é¢˜ç¼–å·**ï¼šBUG-202502ï¼ˆè¡¥å……ï¼‰
- **é—®é¢˜åˆ†ç±»**ï¼šç½‘ç»œè¯·æ±‚å¼‚å¸¸ï¼ˆCORS/Axiosï¼‰ã€ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
- **æ¶‰åŠæ¨¡å—**ï¼šåç«¯CORSé…ç½®ã€å‰ç«¯Axiosè¯·æ±‚å°è£…ã€å‰åç«¯ç‰ˆæœ¬åŒæ­¥
- **è§£å†³æ—¶é—´**ï¼š2025å¹´XXæœˆXXæ—¥
- **è§£å†³æ–¹å¼**ï¼šé…ç½®ä¿®å¤+ç‰ˆæœ¬å›é€€


## äºŒã€CORSé”™è¯¯é—®é¢˜è§£å†³
### 1. é—®é¢˜ç°è±¡
- å‰ç«¯ï¼ˆç”¨æˆ·é¡µ/åå°ç®¡ç†ç³»ç»Ÿï¼‰å‘èµ·è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨æ§åˆ¶å°æŠ¥`Access to XMLHttpRequest at 'http://localhost:8000/xxx' from origin 'http://localhost:3001' has been blocked by CORS policy`é”™è¯¯ï¼›
- éƒ¨åˆ†è¯·æ±‚ï¼ˆå¦‚`/detect`æ–‡ä»¶ä¸Šä¼ ï¼‰èƒ½æ­£å¸¸å“åº”ï¼Œä½†`/detections`è·å–å†å²è®°å½•è¯·æ±‚è¢«æ‹¦æˆªã€‚


### 2. é—®é¢˜æ ¹æº
- åç«¯CORSé…ç½®ä¸­ï¼Œ`allow_origins`æœªå®Œå…¨åŒ…å«æ‰€æœ‰å‰ç«¯åœ°å€ï¼ˆå¦‚ç”¨æˆ·é¡µ`http://localhost:3001`ã€`http://127.0.0.1:3001`ï¼‰ï¼›
- æœªæ˜ç¡®é…ç½®`allow_credentials: True`ï¼ˆè™½ä¹‹å‰ä»£ç æœ‰ï¼Œä½†éƒ¨åˆ†åœºæ™¯ä¸‹é¢„æ£€è¯·æ±‚æœªæ­£ç¡®å“åº”ï¼‰ï¼›
- åç«¯æœªå¤„ç†`OPTIONS`é¢„æ£€è¯·æ±‚ï¼ˆFastAPIè™½è‡ªåŠ¨å¤„ç†ï¼Œä½†éœ€ç¡®ä¿CORSä¸­é—´ä»¶åŠ è½½é¡ºåºæ­£ç¡®ï¼‰ã€‚


### 3. è§£å†³æ–¹æ¡ˆ
#### ï¼ˆ1ï¼‰åç«¯CORSé…ç½®ä¿®å¤ï¼ˆ`main.py`ï¼‰
```python
# åŸCORSé…ç½®ï¼ˆé—æ¼ç”¨æˆ·é¡µ3001ç«¯å£ï¼‰
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:8080", "http://127.0.0.1:8080"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ä¿®å¤åCORSé…ç½®ï¼ˆè¡¥å……ç”¨æˆ·é¡µåœ°å€ï¼Œæ˜ç¡®å…è®¸æ‰€æœ‰åˆæ³•å‰ç«¯æºï¼‰
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000", "http://127.0.0.1:3000",  # åå°ç®¡ç†ç³»ç»Ÿ
        "http://localhost:3001", "http://127.0.0.1:3001",  # ç”¨æˆ·æ£€æµ‹é¡µï¼ˆå…³é”®è¡¥å……ï¼‰
        "http://localhost:8080", "http://127.0.0.1:8080"   # å…¶ä»–å¯èƒ½çš„å‰ç«¯åœ°å€
    ],
    allow_credentials=True,  # å…è®¸æºå¸¦Cookieï¼ˆå¦‚éœ€ç™»å½•æ€ï¼‰
    allow_methods=["GET", "POST", "OPTIONS", "DELETE"],  # æ˜ç¡®å…è®¸å¸¸ç”¨æ–¹æ³•ï¼ˆé¿å…é€šé…ç¬¦æ½œåœ¨é—®é¢˜ï¼‰
    allow_headers=["Content-Type", "Authorization"],  # æ˜ç¡®å…è®¸çš„è¯·æ±‚å¤´
)
```

#### ï¼ˆ2ï¼‰éªŒè¯CORSç”Ÿæ•ˆ
- é‡å¯åç«¯æœåŠ¡åï¼Œç”¨æµè§ˆå™¨è®¿é—®å‰ç«¯é¡µé¢ï¼Œæ‰“å¼€ã€Œå¼€å‘è€…å·¥å…·â†’Networkã€ï¼›
- æŸ¥çœ‹`/detections`è¯·æ±‚çš„ã€ŒResponse Headersã€ï¼Œç¡®è®¤åŒ…å«`Access-Control-Allow-Origin: http://localhost:3001`ï¼ˆä¸å‰ç«¯åœ°å€åŒ¹é…ï¼‰ï¼›
- æ— `CORS policy`ç›¸å…³æŠ¥é”™ï¼Œè¯·æ±‚æ­£å¸¸è¿”å›æ•°æ®ã€‚


## ä¸‰ã€Axiosé—®é¢˜è§£å†³
### 1. é—®é¢˜ç°è±¡
- å‰ç«¯è¯·æ±‚åç«¯æ—¶ï¼Œéƒ¨åˆ†æ¥å£æŠ¥`415 Unsupported Media Type`ï¼ˆä¸æ”¯æŒçš„åª’ä½“ç±»å‹ï¼‰ï¼›
- å“åº”æ‹¦æˆªå™¨æœªæ­£ç¡®å¤„ç†åç«¯è¿”å›çš„é”™è¯¯æ ¼å¼ï¼Œå¯¼è‡´å‰ç«¯æ•è·ä¸åˆ°å…·ä½“é”™è¯¯ä¿¡æ¯ï¼›
- è¶…æ—¶æ—¶é—´è¿‡çŸ­ï¼ˆå¦‚é»˜è®¤5ç§’ï¼‰ï¼Œå¤§å›¾ç‰‡ä¸Šä¼ æ—¶è§¦å‘è¶…æ—¶é”™è¯¯ã€‚


### 2. é—®é¢˜æ ¹æº
- Axioså®ä¾‹é»˜è®¤`Content-Type`è®¾ä¸º`multipart/form-data`ï¼Œå¯¼è‡´éè¡¨å•è¯·æ±‚ï¼ˆå¦‚`GET /detections`ï¼‰çš„è¯·æ±‚å¤´æ ¼å¼é”™è¯¯ï¼›
- å“åº”æ‹¦æˆªå™¨æœªåŒºåˆ†â€œåç«¯ä¸šåŠ¡é”™è¯¯â€å’Œâ€œç½‘ç»œé”™è¯¯â€ï¼Œç›´æ¥æŠ›å‡ºå­—ç¬¦ä¸²ï¼Œå‰ç«¯æ— æ³•è§£æé”™è¯¯è¯¦æƒ…ï¼›
- è¶…æ—¶æ—¶é—´ï¼ˆ`timeout`ï¼‰è®¾ç½®ä¸º30ç§’ï¼Œä½†æœªåœ¨æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ä¸­å•ç‹¬é…ç½®ï¼ˆå¤§æ–‡ä»¶ä¸Šä¼ å¯èƒ½è¶…è¿‡30ç§’ï¼‰ã€‚


### 3. è§£å†³æ–¹æ¡ˆï¼ˆ`src/services/api.js`ï¼‰
```javascript
// åŸAxiosé…ç½®ï¼ˆé—®é¢˜ç‚¹ï¼šé»˜è®¤Content-Typeé”™è¯¯ã€å“åº”æ‹¦æˆªå™¨å¤„ç†ç²—ç³™ï¼‰
const apiClient = axios.create({
  baseURL: 'http://localhost:8000',
  timeout: 30000,
  headers: {
    'Content-Type': 'multipart/form-data'  // é”™è¯¯ï¼šæ‰€æœ‰è¯·æ±‚é»˜è®¤è¡¨å•æ ¼å¼
  }
})

// ä¿®å¤åAxiosé…ç½®
const apiClient = axios.create({
  baseURL: 'http://localhost:8000',
  timeout: 30000,  // é»˜è®¤è¶…æ—¶30ç§’
  // ç§»é™¤é»˜è®¤Content-Typeï¼Œè®©Axiosè‡ªåŠ¨æ ¹æ®è¯·æ±‚ç±»å‹è®¾ç½®
})

// å“åº”æ‹¦æˆªå™¨ä¿®å¤ï¼ˆåŒºåˆ†é”™è¯¯ç±»å‹ï¼Œä¿ç•™é”™è¯¯è¯¦æƒ…ï¼‰
apiClient.interceptors.response.use(
  (response) => {
    return response.data;  // æ­£å¸¸å“åº”ç›´æ¥è¿”å›æ•°æ®
  },
  (error) => {
    console.error('APIè¯·æ±‚é”™è¯¯:', error);
    // æ„å»ºç»“æ„åŒ–é”™è¯¯ä¿¡æ¯ï¼ŒåŒ…å«çŠ¶æ€ç ã€é”™è¯¯è¯¦æƒ…
    const errorInfo = {
      status: error.response?.status || 'network_error',
      message: error.response?.data?.detail || error.message || 'æœªçŸ¥é”™è¯¯',
      data: error.response?.data || null
    };
    throw errorInfo;  // æŠ›å‡ºç»“æ„åŒ–é”™è¯¯ï¼Œå‰ç«¯å¯æŒ‰éœ€å¤„ç†
  }
)

// æ£€æµ‹æ¥å£å•ç‹¬é…ç½®ï¼ˆå¤§æ–‡ä»¶ä¸Šä¼ å»¶é•¿è¶…æ—¶ï¼‰
class DetectionService {
  async detectImage(file) {
    const formData = new FormData();
    formData.append('file', file);
    
    return await apiClient.post('/detect', formData, {
      timeout: 60000,  // å•ç‹¬è®¾ç½®60ç§’è¶…æ—¶ï¼ˆåº”å¯¹å¤§å›¾ç‰‡ï¼‰
      headers: {
        'Content-Type': 'multipart/form-data'  // ä»…åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶è®¾ç½®è¡¨å•æ ¼å¼
      }
    });
  }
  // å…¶ä»–æ¥å£æ–¹æ³•ä¸å˜...
}
```

### 4. éªŒè¯Axiosä¿®å¤
- å‘èµ·`GET /detections`è¯·æ±‚ï¼ŒæŸ¥çœ‹ã€ŒRequest Headersã€ï¼Œç¡®è®¤`Content-Type`æœªè¢«è®¾ç½®ï¼ˆAxiosè‡ªåŠ¨çœç•¥ï¼Œç¬¦åˆGETè¯·æ±‚è§„èŒƒï¼‰ï¼›
- æ•…æ„ä¼ å…¥é”™è¯¯æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚.txtï¼‰ï¼Œå‰ç«¯èƒ½æ•è·åˆ°`status: 400`ã€`message: "ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼"`çš„ç»“æ„åŒ–é”™è¯¯ï¼›
- ä¸Šä¼ 10MBå¤§å›¾ç‰‡ï¼Œè¯·æ±‚æ­£å¸¸å®Œæˆï¼Œæ— è¶…æ—¶é”™è¯¯ã€‚


## å››ã€ç‰ˆæœ¬å›é€€æ“ä½œè®°å½•ï¼ˆè§£å†³â€œè®°å½•ä¸æ˜¾ç¤ºâ€æœ€ç»ˆæ–¹æ¡ˆï¼‰
### 1. å›é€€åŸå› 
- ä¹‹å‰å¯¹`Detections.vue`å’Œ`detection.js`çš„ä¿®æ”¹ï¼ˆå¦‚è¾¹ç•Œæ¡†è®¡ç®—ã€çŠ¶æ€åŒæ­¥ï¼‰è™½è§£å†³äº†éƒ¨åˆ†é—®é¢˜ï¼Œä½†å¼•å…¥äº†â€œæœ¬åœ°çŠ¶æ€ä¸åç«¯æ•°æ®ä¸ä¸€è‡´â€çš„æ–°é—®é¢˜ï¼ˆå¦‚åˆ·æ–°åè®°å½•é‡å¤ï¼‰ï¼›
- æ—¶é—´ç´§å¼ ï¼Œä¸”å›é€€åˆ°å†å²ç¨³å®šç‰ˆæœ¬ï¼ˆä¿®æ”¹å‰ï¼‰èƒ½å¿«é€Ÿæ¢å¤â€œè®°å½•æ­£å¸¸æ˜¾ç¤ºâ€æ ¸å¿ƒåŠŸèƒ½ï¼Œåç»­å¯åŸºäºç¨³å®šç‰ˆæœ¬é€æ­¥ä¼˜åŒ–ã€‚


### 2. å›é€€æ“ä½œï¼ˆGitå‘½ä»¤ï¼‰
#### ï¼ˆ1ï¼‰å‰ç«¯å›é€€ï¼ˆVueé¡¹ç›®ï¼‰
```bash
# 1. æŸ¥çœ‹æäº¤å†å²ï¼Œæ‰¾åˆ°â€œè®°å½•èƒ½æ­£å¸¸æ˜¾ç¤ºâ€çš„ç¨³å®šç‰ˆæœ¬ï¼ˆç¤ºä¾‹commitå“ˆå¸Œï¼ša1b2c3dï¼‰
git log --oneline

# 2. å›é€€åˆ°ç¨³å®šç‰ˆæœ¬ï¼ˆä¿ç•™æœ¬åœ°ä¿®æ”¹ï¼Œä¾¿äºåç»­å¯¹æ¯”ï¼‰
git reset --soft a1b2c3d

# 3. ä¸¢å¼ƒå½“å‰ä¿®æ”¹ï¼Œæ¢å¤åˆ°ç¨³å®šç‰ˆæœ¬çš„ä»£ç 
git checkout -- src/views/Detections.vue src/stores/detection.js src/services/api.js

# 4. é‡å¯å‰ç«¯æœåŠ¡
npm run dev
```

#### ï¼ˆ2ï¼‰åç«¯å›é€€ï¼ˆFastAPIé¡¹ç›®ï¼‰
```bash
# 1. æŸ¥çœ‹åç«¯æäº¤å†å²ï¼Œæ‰¾åˆ°å¯¹åº”ç¨³å®šç‰ˆæœ¬ï¼ˆç¤ºä¾‹commitå“ˆå¸Œï¼šd4e5f6gï¼‰
git log --oneline

# 2. å›é€€åˆ°ç¨³å®šç‰ˆæœ¬
git reset --hard d4e5f6g

# 3. é‡å¯åç«¯æœåŠ¡
python main.py
```


### 3. å›é€€éªŒè¯ç»“æœ
- **CORSé”™è¯¯**ï¼šä¿®å¤ååç«¯CORSé…ç½®åŒ…å«æ‰€æœ‰å‰ç«¯åœ°å€ï¼Œæ— æ‹¦æˆªé”™è¯¯ï¼›
- **Axiosé—®é¢˜**ï¼šè¯·æ±‚æ ¼å¼ã€è¶…æ—¶ã€é”™è¯¯å¤„ç†å‡æ­£å¸¸ï¼Œæ— 415/è¶…æ—¶æŠ¥é”™ï¼›
- **è®°å½•æ˜¾ç¤º**ï¼šç”¨æˆ·é¡µæ£€æµ‹åï¼Œåå°ç®¡ç†ç³»ç»Ÿé€šè¿‡â€œåˆ·æ–°é¡µé¢â€æˆ–â€œå®šæ—¶åŒæ­¥â€èƒ½æ­£å¸¸æ˜¾ç¤ºè®°å½•ï¼Œç¼©ç•¥å›¾ã€æ£€æµ‹æ¡†å®Œæ•´ã€‚


## äº”ã€åç»­ä¼˜åŒ–å»ºè®®
1. **ç‰ˆæœ¬ç®¡ç†è§„èŒƒ**ï¼š
   - åç»­ä¿®æ”¹å‰åˆ›å»ºåˆ†æ”¯ï¼ˆå¦‚`feature/cors-fix`ã€`bugfix/axios-error`ï¼‰ï¼Œé¿å…ç›´æ¥åœ¨ä¸»åˆ†æ”¯ä¿®æ”¹ï¼›
   - æ¯æ¬¡ä¿®æ”¹åå…ˆæœ¬åœ°æµ‹è¯•ï¼ˆéªŒè¯CORSã€Axiosã€è®°å½•æ˜¾ç¤ºï¼‰ï¼Œå†æäº¤ä»£ç ã€‚

2. **æµ‹è¯•æµç¨‹è¡¥å……**ï¼š
   - æ–°å¢â€œè·¨é¡µé¢æ£€æµ‹åŒæ­¥â€æµ‹è¯•ç”¨ä¾‹ï¼šç”¨æˆ·é¡µæ£€æµ‹â†’åå°ç®¡ç†ç³»ç»ŸéªŒè¯è®°å½•æ˜¾ç¤ºï¼›
   - æ–°å¢â€œå¼‚å¸¸åœºæ™¯â€æµ‹è¯•ï¼šå¤§æ–‡ä»¶ä¸Šä¼ ã€é”™è¯¯æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œæ³¢åŠ¨ï¼Œç¡®ä¿Axiosé”™è¯¯å¤„ç†æ­£å¸¸ã€‚

3. **é•¿æœŸæŠ€æœ¯æ–¹æ¡ˆ**ï¼š
   - è‹¥éœ€å®æ—¶åŒæ­¥è®°å½•ï¼Œå¯å¼•å…¥WebSocketï¼ˆåç«¯ç”¨`fastapi-websockets`ï¼Œå‰ç«¯ç›‘å¬æ–°è®°å½•æ¨é€ï¼‰ï¼Œæ›¿ä»£â€œå®šæ—¶åˆ·æ–°â€ï¼›
   - å‰ç«¯çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰æ·»åŠ â€œæ•°æ®ç‰ˆæœ¬å·â€ï¼Œé¿å…æœ¬åœ°æ•°æ®ä¸åç«¯æ•°æ®å†²çªã€‚
